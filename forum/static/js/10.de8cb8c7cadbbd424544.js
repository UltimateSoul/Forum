webpackJsonp([10],{KCKD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("mtWM"),a=n.n(o),i={name:"Shop",data:function(){return{loading:!1,secret:null,stripeAPIToken:"pk_test_6N0OZCClQ43Mx8TA4eXmyh9g00fxEBrE4b",stripe:null,elements:null,card:null,name:null,addPaymentStatus:0,addPaymentStatusError:null}},methods:{createPaymentIntent:function(t){var e=this,n={amount:t};a.a.post("http://0.0.0.0:5000/shop/create-payment-intent/",n).then(function(t){switch(t.status){case 201:e.secret=t.data.secret,e.showPaymentModal()}})},showPaymentModal:function(){this.$modal.show("paymentModal"),this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this))},hidePaymentModal:function(){this.$modal.hide("paymentModal")},includeStripe:function(t,e){var n=document,o=n.createElement("script"),a=n.getElementsByTagName("script")[0];o.src="//"+t,e&&o.addEventListener("load",function(t){e(null,t)},!1),a.parentNode.insertBefore(o,a)},configureStripe:function(){this.stripe=Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},submitPayment:function(){this.loading=!0;var t=this;this.stripe.confirmCardPayment(this.secret,{payment_method:{card:this.card}}).then(function(e){e.error?(console.log("errors: ",e.error),t.loading=!1,t.hidePaymentModal()):("succeeded"===e.paymentIntent.status&&console.log("succeeded payment"),t.loading=!1,t.hidePaymentModal())})}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Shop")]),t._v(" "),n("h1",[t._v("Buy coins")]),t._v(" "),n("modal",{attrs:{name:"paymentModal",clickToClose:!1}},[n("div",{staticClass:"m-5 text-center"},[n("h1",[t._v("\n        Payment process\n      ")]),t._v(" "),n("label",[t._v("Card")]),t._v(" "),n("div",{staticClass:"form-control",attrs:{id:"card-element"}}),t._v(" "),n("b-button",{attrs:{disabled:t.loading,variant:"success"},on:{click:t.submitPayment}},[t._v("Submit")])],1)]),t._v(" "),n("div",{staticStyle:{background:"url('http://0.0.0.0:5000/static/images/golden_coins.jpg')",height:"556px"}},[n("b-row",[n("b-col",[n("h3",[t._v("500 Coins")]),t._v(" "),n("b-button",{on:{click:function(e){return t.createPaymentIntent(500)}}},[t._v("Buy")])],1),t._v(" "),n("b-col",[n("h3",[t._v("750 Coins")]),t._v(" "),n("b-button",{on:{click:function(e){return t.createPaymentIntent(750)}}},[t._v("Buy")])],1),t._v(" "),n("b-col",[n("h3",[t._v("1000 Coins")]),t._v(" "),n("b-button",{on:{click:function(e){return t.createPaymentIntent(1e3)}}},[t._v("Buy")])],1)],1),t._v(" "),n("hr"),t._v(" "),n("b-row",[n("b-col",[n("h3",[t._v("2000 Coins")]),t._v(" "),n("b-button",{on:{click:function(e){return t.createPaymentIntent(2e3)}}},[t._v("Buy")])],1),t._v(" "),n("b-col",[n("h3",[t._v("5000 Coins")]),t._v(" "),n("b-button",{on:{click:function(e){return t.createPaymentIntent(5e3)}}},[t._v("Buy")])],1),t._v(" "),n("b-col",[n("h3",[t._v("10000 Coins")]),t._v(" "),n("b-button",{on:{click:function(e){return t.createPaymentIntent(1e4)}}},[t._v("Buy")])],1)],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(i,r,!1,function(t){n("XBjz")},"data-v-339b7a08",null);e.default=c.exports},XBjz:function(t,e){}});
//# sourceMappingURL=10.de8cb8c7cadbbd424544.js.map