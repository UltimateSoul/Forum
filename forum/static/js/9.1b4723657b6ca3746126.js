webpackJsonp([9],{EAzr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i=s("mtWM"),c=s.n(i),o=s("Rf8U"),n=s.n(o);a.default.use(n.a,c.a);var r={name:"Conversation",data:function(){return{loading:!1,topics:[],testQuantity:2,section:this.$route.params.section,elasticSearch:{suggestions:[],select:null,search:null},searchedTopic:{title:"",description:"",author:{avatar:""}}}},created:function(){this.loading=!0,this.getData()},watch:{"elasticSearch.search":function(t){t&&t!==this.select&&this.getSuggestions(t)},"elasticSearch.select":function(t){var e=void 0;this.elasticSearch.suggestions.forEach(function(s){s.text===t&&(e=s.id)}),this.searchTopicByID(e)}},methods:{getData:function(){var t=this;c.a.get("topics/by-section/",{params:{section:this.section.toUpperCase()}}).then(function(e){t.topics=e.data}).finally(function(){t.loading=!1})},createTopic:function(){this.$router.push({name:"topic-creation"})},moveToTopic:function(t){this.$router.push({name:"topic",params:{section:this.section,topicID:t}})},getSuggestions:function(t){var e=this;c.a.get("http://e7f88eea.ngrok.io/core/search-topics/",{params:{query:this.elasticSearch.search,section:this.$route.params.section}}).then(function(t){switch(t.status){case 200:e.elasticSearch.suggestions=t.data}})},showSearchedTopic:function(){this.$modal.show("searchedTopic")},hideSearchedTopic:function(){this.$modal.hide("searchedTopic")},searchTopicByID:function(t){var e=this;console.log("I'm searching topic by title: \""+this.elasticSearch.search+'"'),c.a.get("topics/"+t+"/").then(function(t){switch(t.status){case 200:e.searchedTopic=t.data,e.showSearchedTopic()}})}},filters:{getDateFormat:function(t){var e=new Date(t);return e.toLocaleDateString()+"  "+e.toLocaleTimeString()}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-autocomplete",{staticClass:"mx-4",attrs:{items:t.elasticSearch.suggestions,"search-input":t.elasticSearch.search,flat:"","hide-no-data":"","hide-details":"",label:"Search topics in that section by title","solo-inverted":""},on:{"update:searchInput":function(e){return t.$set(t.elasticSearch,"search",e)},"update:search-input":function(e){return t.$set(t.elasticSearch,"search",e)}},model:{value:t.elasticSearch.select,callback:function(e){t.$set(t.elasticSearch,"select",e)},expression:"elasticSearch.select"}}),t._v(" "),s("div",{staticStyle:{margin:"40px"},scopedSlots:t._u([{key:"suggestion",fn:function(e){var s=e.data;return[t._v("\n      "+t._s(s.elasticSearch.suggestions)+"\n    ")]}}])}),t._v(" "),Boolean(t.searchedTopic)?s("modal",{attrs:{name:"searchedTopic",draggable:!0,"aria-expanded":!0,height:"30%",width:"50%"}},[s("div",[s("div",{on:{click:function(e){return t.moveToTopic(t.searchedTopic.id)}}},[s("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""},on:{click:function(e){return t.moveToTopic(t.searchedTopic.id)}}},[s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{attrs:{md:"6"}},[s("b-card-img",{staticClass:"rounded-0",attrs:{src:t.searchedTopic.author.avatar,alt:"Image"}})],1),t._v(" "),s("b-col",{attrs:{md:"6"}},[s("b-card-body",{attrs:{title:t.searchedTopic.title}},[s("b-card-text",[t._v("\n                  "+t._s(t.searchedTopic.description)+"\n                ")]),t._v(" "),s("b-button",{staticClass:"primary",on:{click:function(e){return t.moveToTopic(t.topic.id)}}},[t._v("\n                  go to that topic\n                ")])],1)],1)],1)],1)],1)])]):t._e(),t._v(" "),s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"col-lg-4"},[t.$store.getters.isLogged?s("button",{staticClass:"btn btn-dark",on:{click:t.createTopic}},[t._v("\n        Create Topic\n      ")]):t._e()])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-md-10 col-xs-5"},[t.loading?t._e():s("table",{staticClass:"table"},[t._m(1),t._v(" "),s("transition-group",{tag:"tbody",attrs:{name:"slide"}},t._l(t.topics,function(e,a){return s("tr",{key:a,staticClass:"clickable",on:{click:function(s){return t.moveToTopic(e.id)}}},[s("th",[t._v("\n            "+t._s(e.title)+"\n          ")]),t._v(" "),s("td",[t._v(t._s(e.posts_quantity))]),t._v(" "),s("td",[t._v(t._s(e.author.username))]),t._v(" "),s("td",[t._v(t._s(t._f("getDateFormat")(e.edited_at)))])])}),0)],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-lg-8"},[e("h1",[this._v("Conversation")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[this._v("Topic")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Responses")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Author")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Edited Date")])])])}]};var l=s("VU/8")(r,h,!1,function(t){s("bfWt")},"data-v-33c8fd81",null);e.default=l.exports},bfWt:function(t,e){}});
//# sourceMappingURL=9.1b4723657b6ca3746126.js.map