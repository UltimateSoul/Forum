webpackJsonp([16],{"7zck":function(e,t){},"9M+g":function(e,t){},IrDe:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),o=a("mtWM"),i=a.n(o),r=a("Dd8w"),s=a.n(r),c=a("NYxO"),u=a("sHmK"),l={name:"Sidebar",components:{Reveal:u.Reveal},methods:{loginClick:function(){this.isLogged?(this.$router.push({name:"login"}),this.$store.commit("logout")):this.$router.push({name:"login"})},profileClick:function(){var e=this.$store.getters.getUserData;this.$router.push({name:"user-profile",params:{id:e.userID}})}},computed:s()({},Object(c.b)(["isLogged"]),Object(c.c)(["logout"]),{logText:function(){return this.isLogged?"Logout":"Login"}})},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Reveal",[a("router-link",{attrs:{to:"/"}},[a("span",[e._v(" Home ")])]),e._v(" "),a("a",{on:{click:e.loginClick}},[a("span",[e._v(" "+e._s(e.logText)+" ")])]),e._v(" "),a("router-link",{attrs:{to:"/shop"}},[a("span",[e._v(" Shop ")])]),e._v(" "),a("router-link",{attrs:{to:"/get-started"}},[a("span",[e._v(" GetÂ Started ")])]),e._v(" "),e.isLogged?a("router-link",{attrs:{to:"/sections"}},[a("span",[e._v(" Sections ")])]):e._e(),e._v(" "),e.isLogged?a("router-link",{attrs:{to:"/teams"}},[a("span",[e._v(" Teams ")])]):e._e(),e._v(" "),e.isLogged?a("a",{on:{click:e.profileClick}},[a("span",[e._v(" Profile ")])]):e._e()],1)],1)},staticRenderFns:[]};var d={name:"App",data:function(){return{notifications:[],prevHeight:0}},created:function(){var e=localStorage.getItem("auth_token");Boolean(e)?(this.$store.commit("setAuthToken"),this.$store.dispatch("fetchUser")):this.$router.push({name:"login"}),this.$store.getters.isLogged&&setInterval(this.getNotifications,3e4)},methods:{beforeLeave:function(e){this.prevHeight=getComputedStyle(e).height},enter:function(e){var t=getComputedStyle(e).height;e.style.height=this.prevHeight,setTimeout(function(){e.style.height=t})},afterEnter:function(e){e.style.height="auto"},getNotifications:function(){var e=this;i.a.get("http://0.0.0.0:5000/core/notifications-list/").then(function(t){switch(t.status){case 200:e.notifications=t.data}})},deleteNotification:function(e){var t=this;i.a.delete("http://0.0.0.0:5000/core/delete-notification/"+e+"/").then(function(e){switch(e.status){case 204:t.getNotifications()}})},getNotificationType:function(e){switch(e){case 1:return"success";case 2:return"info";case 3:return"warning";case 4:return"error"}}},components:{sidebar:a("VU/8")(l,m,!1,function(e){a("a0PA")},"data-v-8a26c25a",null).exports}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{attrs:{id:"app"}},[a("sidebar"),e._v(" "),a("main",{attrs:{id:"page-wrap"}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"page-container"},[e._l(e.notifications,function(t){return e.notifications.length?a("div",{staticClass:"clickable",on:{click:function(a){return e.deleteNotification(t.id)}}},[a("v-alert",{key:t.id,attrs:{type:e.getNotificationType(t.notification_type)}},[e._v("\n              "+e._s(t.message)+"\n            ")])],1):e._e()}),e._v(" "),a("transition",{attrs:{name:"fade",mode:"out-in"},on:{beforeLeave:e.beforeLeave,enter:e.enter,afterEnter:e.afterEnter}},[a("router-view")],1)],2)])])],1)])},staticRenderFns:[]};var f=a("VU/8")(d,h,!1,function(e){a("hsYu")},null,null).exports,g=a("Tqaz"),p=(a("Jmt5"),a("9M+g"),a("/ocq")),v={name:"Home",data:function(){return{fields:["avatar","title","description","posts_quantity"],show:!1,popularTopics:[],loading:!1}},created:function(){this.isLogged||this.$router.push({name:"login"}),this.getPopularTopics()},methods:{getDaysHere:function(){var e=Date.now();return Math.round(Math.abs((e-this.user.dateJoined)/864e5))},getPopularTopics:function(){var e=this;this.loading=!0,i.a.get("http://0.0.0.0:5000/core/get-popular-topics/").then(function(t){switch(t.status){case 200:e.popularTopics=t.data,e.loading=!1;break;default:e.loading=!1}})},profileClick:function(){this.$router.push({name:"user-profile",params:{id:this.user.userID}})},clickTopic:function(e){this.$router.push({name:"topic",params:{section:e.section,topicID:e.id}})}},computed:s()({},Object(c.b)({isLogged:"isLogged",user:"getUserData"})),filters:{getDateFormat:function(e){return new Date(e).toLocaleDateString()}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"center-card"},[a("b-card",{staticClass:"overflow-hidden special-card",staticStyle:{"max-width":"540px"},attrs:{"no-body":""}},[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{md:"6"}},[a("b-card-img",{staticClass:"rounded-0",attrs:{src:e.user.avatar?e.user.avatar:"http://0.0.0.0:5000/static/images/default.jpg",alt:"Image"}})],1),e._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-card-body",{attrs:{title:e.user.username}},[e._v("\n              You are with us for "+e._s(e.getDaysHere())+" days.\n            ")])],1)],1)],1)],1),e._v(" "),a("b-row",{staticClass:"button-control"},[a("b-col",[a("router-link",{attrs:{to:"/get-started"}},[a("b-button",{attrs:{variant:"dark"}},[e._v("Get Started")])],1)],1),e._v(" "),a("b-col",[a("b-button",{attrs:{variant:"dark"},on:{click:e.profileClick}},[e._v("Profile")])],1)],1),e._v(" "),e.popularTopics.length?a("div",[a("h1",[e._v("\n        The most popular topics:\n      ")]),e._v(" "),a("b-table",{staticClass:"clicable",attrs:{striped:"",hover:"",items:e.popularTopics,fields:e.fields},on:{"row-clicked":e.clickTopic},scopedSlots:e._u([{key:"cell(avatar)",fn:function(e){return[a("img",{attrs:{src:e.item.author.avatar?e.item.author.avatar:"http://0.0.0.0:5000/static/images/default.jpg",height:"100",width:"100"}})]}},{key:"cell(created_at)",fn:function(t){return[e._v("\n          "+e._s(e._f("getDateFormat")(t.item.created_at))+"\n        ")]}}],null,!1,1330969849)})],1):e._e()],1)},staticRenderFns:[]};var _=a("VU/8")(v,k,!1,function(e){a("IrDe")},"data-v-e87204d8",null).exports;n.default.use(p.a);var b=new p.a({scrollBehavior:function(e,t,a){return a||(e.hash?{selector:e.hash}:{x:0,y:0})},routes:[{path:"",name:"home",component:_},{path:"/login",name:"login",component:function(e){a.e(8).then(function(){e(a("95qr"))}.bind(null,a)).catch(a.oe)}},{path:"/conversation/:section",name:"conversation",component:function(e){a.e(9).then(function(){e(a("EAzr"))}.bind(null,a)).catch(a.oe)}},{path:"/conversation/:section/topic/:topicID",name:"topic",component:function(e){Promise.all([a.e(0),a.e(2)]).then(function(){e(a("AuW7"))}.bind(null,a)).catch(a.oe)}},{path:"/topic-creation/:section",name:"topic-creation",component:function(e){Promise.all([a.e(0),a.e(7)]).then(function(){e(a("SmpO"))}.bind(null,a)).catch(a.oe)}},{path:"/topic-editing/:section/:topicID",name:"topic-editing",component:function(e){Promise.all([a.e(0),a.e(14)]).then(function(){e(a("ipG8"))}.bind(null,a)).catch(a.oe)}},{path:"/shop",name:"shop",component:function(e){a.e(10).then(function(){e(a("KCKD"))}.bind(null,a)).catch(a.oe)}},{path:"/teams",name:"teams",component:function(e){a.e(5).then(function(){e(a("cU/W"))}.bind(null,a)).catch(a.oe)}},{path:"/teams/:teamID",name:"team",component:function(e){a.e(6).then(function(){e(a("+2Fi"))}.bind(null,a)).catch(a.oe)}},{path:"/edit-team/:teamID",name:"edit-team",component:function(e){Promise.all([a.e(0),a.e(3)]).then(function(){e(a("to62"))}.bind(null,a)).catch(a.oe)}},{path:"/create-team",name:"create-team",component:function(e){Promise.all([a.e(0),a.e(11)]).then(function(){e(a("vDDD"))}.bind(null,a)).catch(a.oe)}},{path:"/get-started",name:"get-started",component:function(e){a.e(13).then(function(){e(a("SYbK"))}.bind(null,a)).catch(a.oe)}},{path:"/user-profile/:id",name:"user-profile",component:function(e){Promise.all([a.e(0),a.e(4)]).then(function(){e(a("ec7E"))}.bind(null,a)).catch(a.oe)}},{path:"/sections",name:"sections",component:function(e){a.e(1).then(function(){e(a("MN7i"))}.bind(null,a)).catch(a.oe)}},{path:"/registration",name:"registration",component:function(e){Promise.all([a.e(0),a.e(12)]).then(function(){e(a("mm3c"))}.bind(null,a)).catch(a.oe)}}],mode:"history"}),T=a("Rf8U"),D=a.n(T),w={state:{user:{isLogged:!1,userID:null,username:"",email:"",coins:0,avatarImage:"",gameNickName:"",gender:"",date_joined:null,isModerator:!1,isAdmin:!1,hasTeam:!1,isTeamOwner:!1,teamID:null}},getters:{isLogged:function(e){return e.user.isLogged},getTeamID:function(e){return e.user.teamID},isModerator:function(e){return e.user.isModerator},getUserData:function(e){var t=e.user;return{userID:t.userID,username:t.username,dateJoined:t.dateJoined,email:t.email,coins:t.coins,avatar:t.avatarImage,gameNickName:t.gameNickName,gender:t.gender,hasTeam:t.hasTeam,teamID:t.teamID,isModerator:t.isModerator,isTeamOwner:t.isTeamOwner}},isMainUser:function(e){return function(t){return e.user.userID===t}}},actions:{login:function(e,t){return i.a.post("http://0.0.0.0:5000/authentication/api-token-auth/",t).then(function(t){localStorage.setItem("auth_token",t.data.token),e.commit("setAuthToken"),e.dispatch("fetchUser")})},fetchUser:function(e){var t=e.commit;return i.a.get("/users/get-user/").then(function(e){var a=e.data;t("setUserData",a)}).catch(function(e){console.log(e)})},register:function(e,t){return i.a.post("http://0.0.0.0:5000/authentication/register/",t).then(function(t){var a=t.data.auth_token;localStorage.setItem("auth_token",a),e.commit("setAuthToken"),e.dispatch("fetchUser")})}},mutations:{setAuthToken:function(e){e.user.isLogged=Boolean(localStorage.getItem("auth_token")),i.a.defaults.headers.post.Authorization="Token "+localStorage.getItem("auth_token"),i.a.defaults.headers.get.Authorization="Token "+localStorage.getItem("auth_token"),i.a.defaults.headers.delete.Authorization="Token "+localStorage.getItem("auth_token"),i.a.defaults.headers.patch.Authorization="Token "+localStorage.getItem("auth_token")},setUserData:function(e,t){e.user.userID=t.pk,e.user.username=t.username,e.user.email=t.email,e.user.avatarImage=t.avatar,e.user.gender=t.gender,e.user.gameNickName=t.game_nickname,e.user.dateJoined=new Date(t.date_joined),e.user.hasTeam=t.has_team,e.user.teamID=t.team_id,e.user.isTeamOwner=t.is_team_owner,e.user.isModerator=t.is_moderator},logout:function(e){localStorage.removeItem("auth_token"),e.user.isLogged=!1}}},I={state:{id:null,totalMembers:0,owner:{avatar:"",username:"",gameNickname:"",pk:null},members:[],name:"",description:"",baseInfo:"",avatar:"",createdDate:""},getters:{hasTeam:function(e,t,a){return a.authentication.user.hasTeam},isTeamOwner:function(e,t,a){return function(e){return a.authentication.user.isTeamOwner&&a.authentication.user.teamID===+e}},getTeam:function(e){return e},getTeamDescription:function(e){return e.description},getTeamAvatar:function(e){return e.avatar},getTeamName:function(e){return e.name}},actions:{getTeamData:function(e,t){var a=e.commit;e.state;return i.a.get("teams/"+t+"/").then(function(e){switch(e.status){case 200:a("setTeamData",e.data)}})}},mutations:{setTeamData:function(e,t){e.id=t.id,e.totalMembers=t.total_members,e.owner.avatar=t.owner.avatar,e.owner.username=t.owner.username,e.owner.gameNickname=t.owner.game_nickname,e.owner.pk=t.owner.pk,e.members=t.members,e.name=t.name,e.description=t.description,e.baseInfo=t.base_info,e.avatar=t.avatar,e.createdDate=t.created_at}}};n.default.use(D.a,i.a),n.default.use(c.a);var S=new c.a.Store({state:{},getters:{},actions:{},mutations:{},modules:{authentication:w,team:I}}),y=a("ESwS"),L=a.n(y),N=a("TX8X"),A=a.n(N),C=a("rifk"),M=a.n(C),U=a("3EgV"),$=a.n(U);a("7zck");n.default.use($.a);var P=new $.a({}),z=a("6J2T"),O=a.n(z),E=a("vdhV"),H=a.n(E);n.default.use(H.a),n.default.use(O.a),n.default.use(M.a),n.default.use(A.a),n.default.use(L.a),n.default.use(g.a),n.default.config.productionTip=!1,i.a.defaults.baseURL="http://0.0.0.0:5000/api/",localStorage.getItem("auth_token")&&(i.a.defaults.headers.post.Authorization="Token "+localStorage.getItem("auth_token"),i.a.defaults.headers.get.Authorization="Token "+localStorage.getItem("auth_token"),i.a.defaults.headers.delete.Authorization="Token "+localStorage.getItem("auth_token"),i.a.defaults.headers.patch.Authorization="Token "+localStorage.getItem("auth_token")),new n.default({el:"#app",router:b,store:S,vuetify:P,components:{App:f},template:"<App/>"})},a0PA:function(e,t){},hsYu:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0ba9fef5af51c9968f55.js.map