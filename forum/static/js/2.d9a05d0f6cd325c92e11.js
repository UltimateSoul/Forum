webpackJsonp([2],{"+U90":function(t,e){},"71fj":function(t,e){},AuW7:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Dd8w"),n=o.n(i),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("svg",{staticStyle:{"enable-background":"new 0 0 488.936 488.936"},attrs:{version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"25px",height:"25px",fill:this.color,viewBox:"0 0 488.936 488.936","xml:space":"preserve"}},[e("g",[e("g",[e("path",{attrs:{d:"M381.16,111.948H107.376c-6.468,0-12.667,2.819-17.171,7.457c-4.504,4.649-6.934,11.014-6.738,17.477l9.323,307.69\n\t\t\tc0.39,12.92,10.972,23.312,23.903,23.312h20.136v-21.012c0-24.121,19.368-44.049,43.488-44.049h127.896\n\t\t\tc24.131,0,43.893,19.928,43.893,44.049v21.012h19.73c12.933,0,23.52-10.346,23.913-23.268l9.314-307.7\n\t\t\tc0.195-6.462-2.234-12.863-6.738-17.513C393.821,114.767,387.634,111.948,381.16,111.948z"}}),this._v(" "),e("path",{attrs:{d:"M309.166,435.355H181.271c-6.163,0-11.915,4.383-11.915,11.516v30.969c0,6.672,5.342,11.096,11.915,11.096h127.895\n\t\t\tc6.323,0,11.366-4.773,11.366-11.096v-30.969C320.532,440.561,315.489,435.355,309.166,435.355z"}}),this._v(" "),e("path",{attrs:{d:"M427.696,27.106C427.696,12.138,415.563,0,400.591,0H88.344C73.372,0,61.239,12.138,61.239,27.106v30.946\n\t\t\tc0,14.973,12.133,27.106,27.105,27.106H400.59c14.973,0,27.105-12.133,27.105-27.106L427.696,27.106L427.696,27.106z"}})])])])])},staticRenderFns:[]};var a=o("VU/8")({name:"DeleteTopicButton",data:function(){return{color:"#000000"}}},s,!1,function(t){o("71fj")},"data-v-7af1c816",null).exports,r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("svg",{staticStyle:{"enable-background":"new 0 0 383.947 383.947"},attrs:{version:"1.1",id:"Capa_1",fill:this.color,x:"0px",y:"0px",height:"25px",width:"25px",viewBox:"0 0 383.947 383.947","xml:space":"preserve"}},[e("g",[e("g",[e("g",[e("polygon",{attrs:{points:"0,303.947 0,383.947 80,383.947 316.053,147.893 236.053,67.893 \t\t\t"}}),this._v(" "),e("path",{attrs:{d:"M377.707,56.053L327.893,6.24c-8.32-8.32-21.867-8.32-30.187,0l-39.04,39.04l80,80l39.04-39.04\n\t\t\t\tC386.027,77.92,386.027,64.373,377.707,56.053z"}})])])])])])},staticRenderFns:[]};var c=o("VU/8")({name:"EditTopicButton",data:function(){return{color:"#000000"}}},r,!1,function(t){o("+U90")},"data-v-b7c4d8fe",null).exports,l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{viewBox:"-42 0 512 512.002",width:"25px",height:"25px",fill:this.color}},[e("path",{attrs:{d:"m210.351562 246.632812c33.882813 0 63.222657-12.152343 87.195313-36.128906 23.972656-23.972656 36.125-53.304687 36.125-87.191406 0-33.875-12.152344-63.210938-36.128906-87.191406-23.976563-23.96875-53.3125-36.121094-87.191407-36.121094-33.886718 0-63.21875 12.152344-87.191406 36.125s-36.128906 53.308594-36.128906 87.1875c0 33.886719 12.15625 63.222656 36.132812 87.195312 23.976563 23.96875 53.3125 36.125 87.1875 36.125zm0 0"}}),this._v(" "),e("path",{attrs:{d:"m426.128906 393.703125c-.691406-9.976563-2.089844-20.859375-4.148437-32.351563-2.078125-11.578124-4.753907-22.523437-7.957031-32.527343-3.308594-10.339844-7.808594-20.550781-13.371094-30.335938-5.773438-10.15625-12.554688-19-20.164063-26.277343-7.957031-7.613282-17.699219-13.734376-28.964843-18.199219-11.226563-4.441407-23.667969-6.691407-36.976563-6.691407-5.226563 0-10.28125 2.144532-20.042969 8.5-6.007812 3.917969-13.035156 8.449219-20.878906 13.460938-6.707031 4.273438-15.792969 8.277344-27.015625 11.902344-10.949219 3.542968-22.066406 5.339844-33.039063 5.339844-10.972656 0-22.085937-1.796876-33.046874-5.339844-11.210938-3.621094-20.296876-7.625-26.996094-11.898438-7.769532-4.964844-14.800782-9.496094-20.898438-13.46875-9.75-6.355468-14.808594-8.5-20.035156-8.5-13.3125 0-25.75 2.253906-36.972656 6.699219-11.257813 4.457031-21.003906 10.578125-28.96875 18.199219-7.605469 7.28125-14.390625 16.121094-20.15625 26.273437-5.558594 9.785157-10.058594 19.992188-13.371094 30.339844-3.199219 10.003906-5.875 20.945313-7.953125 32.523437-2.058594 11.476563-3.457031 22.363282-4.148437 32.363282-.679688 9.796875-1.023438 19.964844-1.023438 30.234375 0 26.726562 8.496094 48.363281 25.25 64.320312 16.546875 15.746094 38.441406 23.734375 65.066406 23.734375h246.53125c26.625 0 48.511719-7.984375 65.0625-23.734375 16.757813-15.945312 25.253906-37.585937 25.253906-64.324219-.003906-10.316406-.351562-20.492187-1.035156-30.242187zm0 0"}})])},staticRenderFns:[]};var d=o("VU/8")({name:"Profile",data:function(){return{color:"#000000"}}},l,!1,function(t){o("GUs6")},"data-v-f816b752",null).exports,u=o("mtWM"),p=o.n(u),v=o("NYxO"),h=o("4vvG"),b=o.n(h),m={name:"Topic",data:function(){return{loading:!1,topicID:this.$route.params.topicID,rows:1,perPage:3,topic:{title:"",description:"",body:"",totalLikes:0,isLiked:!1,removedByModerator:!1,removedAt:null,tags:[]},author:{avatar:"",gameNickName:"",username:"",pk:0},posts:[],buttonsEngine:{},editorPost:"",editorComment:"",editor:b.a,editorConfig:{},currentPage:1}},created:function(){this.getTopicData(),this.getTopicPosts(this.currentPage)},components:{DeleteTopicButton:a,EditTopicButton:c,Profile:d},watch:{$route:function(t,e){this.getTopicData(),this.getTopicPosts(this.currentPage)},currentPage:function(){this.getTopicPosts(this.currentPage)}},methods:{getTopicData:function(){var t=this;return p.a.get("topics/"+this.topicID+"/").then(function(e){t.topic.title=e.data.title,t.topic.tags=e.data.tags,t.topic.description=e.data.description,t.topic.body=e.data.body,t.topic.totalLikes=e.data.total_likes,t.topic.isLiked=e.data.is_liked,t.author.avatar=e.data.author.avatar,t.author.gameNickName=e.data.author.game_nickname,t.author.username=e.data.author.username,t.author.pk=e.data.author.pk,t.title=e.data.title,t.removedByModerator=e.data.removed_by_moderator,t.removedAt=e.data.removed_at}).catch(function(e){t.$router.push({name:"home"})})},profileClick:function(t){this.$router.push({name:"user-profile",params:{id:t}})},showDeleteModal:function(){this.$modal.show("deleteModal")},hideDeleteModal:function(){this.$modal.hide("deleteModal")},moderatorDeleteTopic:function(){var t=this,e={removed_by_moderator:!0,removed_at:Math.floor(Date.now()/1e3)};p.a.patch("topics/"+this.topicID+"/",e).then(function(e){switch(e.status){case 200:t.hideDeleteModal(),t.$router.push({name:"conversation",params:{section:t.$route.params.section}})}}).catch(function(t){t.response.status})},getTopicPosts:function(t){var e=this;this.loading=!0,p.a.get("posts/",{params:{topic:this.topicID,page:t}}).then(function(t){e.posts=t.data.results,e.rows=t.data.count,e.posts.forEach(function(t){var o="button-"+t.id;e.$set(e.buttonsEngine,o,{isOpen:!1})}),e.loading=!1})},editTopic:function(){this.$router.push({name:"topic-editing",params:{section:this.$route.params.section,topicID:this.topicID}})},saveComment:function(t){var e=this,o={body:this.editorComment,post:t};p.a.post("comments/",o).then(function(t){switch(t.status){case 201:e.editorComment="",e.getTopicPosts(e.currentPage)}})},savePost:function(){var t=this,e={body:this.editorPost,topic:this.topicID};p.a.post("posts/",e).then(function(e){switch(e.status){case 201:t.editorPost="",t.getTopicPosts(t.currentPage)}})},likeOrUnlikePostClick:function(t,e){var o=this;e?p.a.post("posts/"+t+"/unlike/").then(function(t){switch(t.status){case 200:o.getTopicPosts(o.currentPage)}}):p.a.post("posts/"+t+"/like/").then(function(t){switch(t.status){case 201:o.getTopicPosts(o.currentPage)}})},likeOrUnlikeCommentClick:function(t,e){var o=this;e&&p.a.post("comments/"+t+"/unlike/").then(function(t){switch(t.status){case 200:o.getTopicPosts(o.currentPage)}}),p.a.post("comments/"+t+"/like/").then(function(t){switch(t.status){case 201:o.getTopicPosts(o.currentPage)}})},likeOrUnlikeTopicClick:function(){var t=this;this.topic.isLiked?p.a.post("topics/"+this.topicID+"/unlike/").then(function(e){switch(e.status){case 200:t.getTopicData()}}):p.a.post("topics/"+this.topicID+"/like/").then(function(e){switch(e.status){case 201:t.getTopicData()}})}},computed:n()({},Object(v.b)(["isMainUser","getUserData","isModerator"]),{getCommentsButtonText:function(){var t=this;return function(e){return console.log("getCommentsButtonText"),t.buttonsEngine[e].isOpen?"Collapse":"Expand"}}})},_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-pagination",{attrs:{"total-rows":t.rows,"per-page":15,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),t._v(" "),o("h1",[t._v(t._s(t.topic.title))]),t._v(" "),o("hr"),t._v(" "),o("h5",[t._v(t._s(t.topic.description))]),t._v(" "),o("modal",{attrs:{name:"deleteModal"}},[o("div",{staticClass:"m-5 text-center"},[o("h1",[t._v("\n        Are you sure?\n      ")]),t._v(" "),o("h4",[t._v("\n        Are you really sure that you want to delete this topic? All you actions will be recorded.\n      ")]),t._v(" "),o("b-row",[o("b-col",[o("b-button",{attrs:{variant:"dark"},on:{click:t.hideDeleteModal}},[t._v("Cancel")])],1),t._v(" "),o("b-col",[o("b-button",{attrs:{variant:"dark"},on:{click:t.moderatorDeleteTopic}},[t._v("Delete")])],1)],1)],1)]),t._v(" "),o("div",[o("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""}},[o("b-row",{attrs:{"no-gutters":""}},[o("b-col",{attrs:{md:"2"}},[o("b-card-img",{staticClass:"rounded-1",attrs:{src:t.author.avatar}}),t._v(" "),o("h5",[t._v(t._s(t.author.username))]),t._v(" "),o("hr"),t._v(" "),o("b-row",[o("b-col",{on:{click:function(e){return t.profileClick(t.author.pk)}}},[o("Profile")],1),t._v(" "),o("b-col"),t._v(" "),o("b-col")],1)],1),t._v(" "),o("b-col",{attrs:{md:"10"}},[o("b-card-body",[o("b-card-text",[o("div",{staticClass:"html-text",domProps:{innerHTML:t._s(t.topic.body)}})])],1)],1)],1),t._v(" "),o("hr"),t._v(" "),o("b-row",t._l(t.topic.tags,function(e){return o("b-col",[o("div",{staticClass:"tag-container"},[t._v("\n            "+t._s(e.name)+"\n          ")])])}),1),t._v(" "),o("hr"),t._v(" "),o("b-row",[o("b-col"),t._v(" "),o("b-col",[t.isModerator?o("div",[o("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{variant:"dark"}},[t._v("Moderator Actions")]),t._v(" "),o("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[o("b-card",[o("b-row",[o("b-col",[o("div",{staticClass:"clickable",on:{click:t.showDeleteModal}},[o("delete-topic-button")],1)]),t._v(" "),o("b-col",[o("div",{staticClass:"clickable",on:{click:t.editTopic}},[o("edit-topic-button")],1)])],1)],1)],1)],1):t._e()]),t._v(" "),o("b-col",[o("b-button",{attrs:{variant:"dark",pressed:t.topic.isLiked,id:"like-topic-button-"+t.topicID},on:{click:t.likeOrUnlikeTopicClick}},[t._v("\n            "+t._s(t.topic.isLiked?"Unlike":"Like")+"\n          ")]),t._v("\n          "+t._s(t.topic.totalLikes)+"\n        ")],1)],1)],1),t._v(" "),t.isMainUser(t.author.pk)?o("div",{staticClass:"button-control"},[o("b-button",{on:{click:t.editTopic}},[t._v("Edit")])],1):t._e(),t._v(" "),t.loading?o("div",[o("b-spinner",{staticClass:"spinner-style",attrs:{label:"Loading..."}})],1):o("div",[t._l(t.posts,function(e){return o("div",{key:e.id},[o("hr"),t._v(" "),o("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""}},[o("b-row",{attrs:{"no-gutters":""}},[o("b-col",{attrs:{md:"2"}},[o("b-card-img",{staticClass:"rounded-1",attrs:{src:e.author.avatar}}),t._v(" "),o("h5",[t._v(t._s(e.author.username))]),t._v(" "),o("hr"),t._v(" "),o("b-row",[o("b-col",{on:{click:function(o){return t.profileClick(e.author.id)}}},[o("Profile")],1),t._v(" "),o("b-col"),t._v(" "),o("b-col")],1)],1),t._v(" "),o("b-col",{attrs:{md:"10"}},[o("b-card-body",[o("div",{staticClass:"html-text",domProps:{innerHTML:t._s(e.body)}})])],1)],1),t._v(" "),o("div",{staticClass:"button-control"},[o("b-button",{attrs:{variant:"dark",pressed:e.is_liked,id:"like-post-button-"+e.id},on:{click:function(o){return t.likeOrUnlikePostClick(e.id,e.is_liked)}}},[t._v("\n              "+t._s(e.is_liked?"Unlike":"Like")+"\n            ")]),t._v("\n            "+t._s(e.total_likes)+"\n          ")],1)],1),t._v(" "),o("div",{staticClass:"button-control"},[o("b-button",{class:t.buttonsEngine["button-"+e.id].isOpen?null:"collapsed",attrs:{variant:"dark","aria-expanded":t.buttonsEngine["button-"+e.id].isOpen?"true":"false","aria-controls":"collaps-"+e.id,id:"button-"+e.id},on:{click:function(o){t.buttonsEngine["button-"+e.id].isOpen=!t.buttonsEngine["button-"+e.id].isOpen}}},[t._v("\n            "+t._s(t.getCommentsButtonText("button-"+e.id))+"\n          ")])],1),t._v(" "),o("b-collapse",{staticClass:"mt-2",attrs:{id:"collaps-"+e.id},model:{value:t.buttonsEngine["button-"+e.id].isOpen,callback:function(o){t.$set(t.buttonsEngine["button-"+e.id],"isOpen",o)},expression:"buttonsEngine['button-'+post.id].isOpen"}},[t._l(e.comments,function(i){return o("div",{staticClass:"message-range"},[o("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""}},[o("b-row",{attrs:{"no-gutters":""}},[o("b-col",{attrs:{md:"2"}},[o("b-card-img",{staticClass:"rounded-1",attrs:{src:i.author.avatar}}),t._v(" "),o("h5",[t._v(t._s(i.author.username))]),t._v(" "),o("hr"),t._v(" "),o("b-row",[o("b-col",{on:{click:function(o){return t.profileClick(e.author.id)}}},[o("Profile")],1),t._v(" "),o("b-col"),t._v(" "),o("b-col")],1)],1),t._v(" "),o("b-col",{attrs:{md:"10"}},[o("b-card-body",[o("b-card-text",[o("div",{staticClass:"html-text",domProps:{innerHTML:t._s(i.body)}})])],1)],1)],1),t._v("\n              Likes: "+t._s(i.total_likes)+"\n              "),o("div",{staticClass:"button-control"},[o("b-button",{attrs:{pressed:i.is_liked,variant:"dark",id:"like-comment-button-"+i.id},on:{click:function(e){return t.likeOrUnlikeCommentClick(i.id,i.is_liked)}}},[t._v("\n                  "+t._s(i.is_liked?"Unlike":"Like")+"\n                ")])],1)],1)],1)}),t._v(" "),o("div",{staticClass:"message-range"},[o("ckeditor",{staticClass:"ck-content",attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.editorComment,callback:function(e){t.editorComment=e},expression:"editorComment"}}),t._v(" "),o("b-button",{attrs:{variant:"dark",id:"button-comment"+e.id},on:{click:function(o){return t.saveComment(e.id)}}},[t._v("\n              Post\n            ")])],1)],2),t._v(" "),t.buttonsEngine["button-"+e.id].isOpen?o("div"):t._e()],1)}),t._v(" "),o("ckeditor",{staticClass:"ck-content",attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.editorPost,callback:function(e){t.editorPost=e},expression:"editorPost"}}),t._v(" "),o("div",{staticClass:"button-control"},[o("b-button",{attrs:{variant:"dark"},on:{click:t.savePost}},[t._v("\n          Post\n        ")])],1)],2)],1),t._v(" "),o("b-pagination",{attrs:{"total-rows":t.rows,"per-page":15,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},staticRenderFns:[]};var g=o("VU/8")(m,_,!1,function(t){o("ySty")},"data-v-067b4450",null);e.default=g.exports},GUs6:function(t,e){},ySty:function(t,e){}});
//# sourceMappingURL=2.d9a05d0f6cd325c92e11.js.map